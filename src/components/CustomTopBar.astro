---
import FeedbackModal from './FeedbackModal.vue'

// Use a static version or get it from environment
const version = import.meta.env.PACKAGE_VERSION || '0.0.2'
---

<nav class="flex items-center justify-between gap-4 px-4 py-3 border-b border-neutral-200">
  <slot name="logo" />

  <div class="ml-auto flex items-center gap-2 text-sm">
    <FeedbackModal
      client:load
      class="text-neutral-400 hover:text-neutral-500 no-underline font-medium transition-all duration-200 ease-in-out bg-transparent border border-transparent sm:px-4 sm:py-2 px-3 py-1.5 flex gap-2 items-center"
      aria-label="Share feedback"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 12 12"
        ><path
          fill="currentColor"
          d="M6 3c0-.275-.225-.5-.5-.5H2.907L3.24.913a.56.56 0 00-.153-.515L2.69 0 .22 2.47A.75.75 0 000 3v3.25c0 .415.335.75.75.75h3.375c.31 0 .577-.187.69-.457l1.132-2.645A.8.8 0 006 3.625zm5.25 2H7.875a.75.75 0 00-.69.457L6.053 8.102A.8.8 0 006 8.375V9c0 .275.225.5.5.5h2.592l-.332 1.588a.56.56 0 00.153.515L9.31 12l2.47-2.47A.75.75 0 0012 9V5.75a.75.75 0 00-.75-.75"
        ></path></svg
      >
      <span class="hidden sm:inline">Feedback & Bugs</span>
    </FeedbackModal>

    <a
      href="https://nimiq.dev"
      class="text-neutral-400 hover:text-neutral-500 no-underline font-medium transition-all duration-200 ease-in-out bg-transparent border border-transparent sm:px-4 sm:py-2 px-3 py-1.5"
      target="_blank"
      rel="noopener noreferrer"
    >
      Developer Center
    </a>
  </div>

  <!-- TutorialKit default slots in proper order -->
  <!-- <slot name="theme-switch" /> -->
  <slot name="download-button" />
  <slot name="open-in-stackblitz-link" />
  <slot name="login-button" />
</nav>

<script is:inline define:vars={{ version }}>
  // Add version info to logo title on page load
  document.addEventListener('DOMContentLoaded', () => {
    // Find the logo element (assuming it's the first child of the logo slot)
    const logoSlot = document.querySelector('nav [slot="logo"]') || document.querySelector('nav a[href="/"]') || document.querySelector('nav img') || document.querySelector('nav svg')
    if (logoSlot) logoSlot.title = `Version ${version}`
  })
</script>
